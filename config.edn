;; job-hunter configuration
;; Edit this file to add sites, keywords, and tune behavior.

{;; ===== SITES =====
 ;; Each site needs :id, :type, :url, and type-specific selectors.
 ;; :type determines which scraper multimethod runs.
 ;;
 ;; Supported types:
 ;;   :hn          — Hacker News "Who's Hiring" thread (auto-extracts top-level comments)
 ;;   :discourse   — Discourse forums like Elixir Forum (topic list → topic pages)
 ;;   :reddit      — Reddit subreddits (uses old.reddit.com for reliable scraping)
 ;;   :css         — Generic: you provide CSS selectors for listing links + content
 ;;   :twitter     — Stub. Twitter/X requires API access; see notes below.

 :sites
 [;; Hacker News "Who's Hiring" — monthly thread
  ;; IMPORTANT: Update :url each month. Find current thread at:
  ;; https://news.ycombinator.com/submitted?id=whoishiring
  {:id   :hn-who-is-hiring
   :type :hn
   :url  "https://news.ycombinator.com/item?id=46857488"  ;; ← Feb 2026; update monthly
   :name "HN Who's Hiring"
   :last-modified nil}

  ;; Elixir Forum job board (Discourse)
  {:id   :elixir-forum
   :type :discourse
   :url  "https://elixirforum.com/c/work/elixir-jobs/16"
   :name "Elixir Forum Jobs"
   :last-modified nil}

  ;; Reddit
  {:id   :reddit-elixir-jobs
   :type :reddit
   :url  "https://old.reddit.com/r/elixirjobs/"
   :name "r/elixirjobs"
   :last-modified nil}

  ;; Twitter/X — NOT FUNCTIONAL via scraping.
  #_{:id   :elixir-jobs-twitter
     :type :twitter
     :url  "https://x.com/ElixirJobsOffer"
     :name "Elixir Jobs Twitter"}

  ;; ===== DISCOURSE FORUMS =====

  ;; Haskell Discourse Jobs (confirmed Discourse, category ID 9)
  {:id   :haskell-discourse
   :type :discourse
   :url  "https://discourse.haskell.org/c/jobs/9"
   :name "Haskell Discourse Jobs"
   :last-modified nil}

  ;; ClojureVerse Jobs (Discourse, but jobs category may have been removed/renamed)
  ;; If this 404s, check https://clojureverse.org/categories for current slug
  #_{:id   :clojureverse-jobs
     :type :discourse
     :url  "https://clojureverse.org/c/jobs/XX" ;; ← need correct category ID
     :name "ClojureVerse Jobs"}

  ;; ===== CSS-BASED JOB BOARDS =====
  ;; Selectors determined via site inspection. Run with :dry-run? true to verify.

  ;; ElixirJobs.net — job links at /offers/[slug]
  {:id               :elixirjobs-net
   :type             :css
   :url              "https://elixirjobs.net"
   :name             "ElixirJobs.net"
   :listing-selector "a[href*='/offers/']"
   :base-url         "https://elixirjobs.net"
   :last-modified    nil}
  ;; NOTE: no :content-selector — detail page uses minimal semantic HTML
  ;; without clear container classes. Title-only matching for now.

  ;; Elixir Radar Jobs — job title links point to EXTERNAL career sites
  ;; (careers.tiltify.com, jobs.x-team.com, apply.workable.com, etc.)
  ;; Need to target external links within the job listing area.
  {:id               :elixir-radar
   :type             :css
   :url              "https://elixir-radar.com/jobs"
   :name             "Elixir Radar Jobs"
   :listing-selector "ul li a[href^='https://']:not([href*='elixir-radar.com'])"
   :base-url         ""
   :last-modified    nil}
  ;; NOTE: selector targets external links in list items. No content-selector
  ;; since each link goes to a different external domain.

  ;; Rust Jobs — rustjobs.dev (rate-limits aggressively, returns 429)
  ;; Commented out until selectors can be verified via browser DevTools.
  #_{:id               :rustjobs
     :type             :css
     :url              "https://rustjobs.dev"
     :name             "Rust Jobs"
     :listing-selector "a[href*='/job']"  ;; ← needs verification
     :base-url         "https://rustjobs.dev"}

  ;; Functional Works (redirects from functionalworks.com → functional.works-hub.com)
  {:id               :functional-works
   :type             :css
   :url              "https://functional.works-hub.com/jobs"
   :name             "Functional Works"
   :listing-selector "a[href^='/jobs/']"
   :base-url         "https://functional.works-hub.com"
   :last-modified    nil}

  ;; We Work Remotely — remote programming jobs
  ;; Using category page to avoid nav/CTA noise from homepage.
  ;; Job links are <li><a href="/remote-jobs/[slug]"> with <h3> inside.
  {:id               :weworkremotely
   :type             :css
   :url              "https://weworkremotely.com/categories/remote-programming-jobs"
   :name             "We Work Remotely"
   :listing-selector "li a[href*='/remote-jobs/']"
   :base-url         "https://weworkremotely.com"
   :last-modified    nil}

  ;; Remote OK — remote jobs with tech stack filtering
  {:id               :remoteok
   :type             :css
   :url              "https://remoteok.com"
   :name             "Remote OK"
   :listing-selector "a[href*='/remote-']"
   :base-url         "https://remoteok.com"
   :last-modified    nil}
  ;; NOTE: heavily JS-rendered. Selectors are best-guess; may need tuning.

  ;; Built In SF — Bay Area tech jobs
  {:id               :builtinsf
   :type             :css
   :url              "https://www.builtinsf.com/jobs"
   :name             "Built In SF"
   :listing-selector "a[href*='/job/']"
   :base-url         "https://www.builtinsf.com"
   :last-modified    nil}

  ;; YC Work at a Startup — Y Combinator job board
  {:id               :yc-jobs
   :type             :css
   :url              "https://www.ycombinator.com/jobs/role/software-engineer"
   :name             "YC Work at a Startup"
   :listing-selector "a[href*='/companies/'][href*='/jobs/']"
   :base-url         "https://www.ycombinator.com"
   :last-modified    nil}

  ;; ===== SPA / DIFFICULT SITES =====
  ;; These are JavaScript SPAs. etaoin uses a real browser so they may work,
  ;; but selectors are fragile and may break frequently.

  ;; Wellfound (formerly AngelList) — startup-focused, heavy JS SPA
  ;; Returns 403 to scrapers and renders job listings entirely client-side.
  ;; Commented out — would need Wellfound API or a different approach.
  #_{:id               :wellfound
     :type             :css
     :url              "https://wellfound.com/role/software-engineer"
     :name             "Wellfound"
     :listing-selector "a[href*='/jobs/']"
     :base-url         "https://wellfound.com"}

  ;; ===== NOT SCRAPABLE =====
  ;; LinkedIn: requires login, heavy anti-bot. Use LinkedIn job alerts via email instead.
  ;; functionaljobs.com: SSL errors, appears defunct.
  ;; fsharp.org/community/jobs: 404, no jobs page exists.
  ;; beamjobs.com: NOT a BEAM job board — it's an AI resume builder.
  ;; keyvalues.com: 503, appears down.
  ;; startup.jobs: 403, blocked.
  ;; clojure.org/community/jobs: 403, blocked.
  ]

 ;; ===== ALLOWLIST KEYWORDS =====
 ;; A posting's title + text must contain at least one of these (case-insensitive).
 ;; Broader terms cast a wider net; narrow terms reduce noise.
 :include-keywords
 ["elixir" "phoenix" "liveview" "erlang" "the beam"
  "clojure" "clojurescript" "functional programming"
  "rust" "haskell" "f#" "fsharp"
  "technical writer" "technical writing" "write documentation"
  ]

 ;; ===== LOCATION FILTER =====
 ;; When set to "US", uses LLM to reject postings clearly outside the US.
 ;; Set to nil or remove to disable.
 :location-filter "US"

 ;; ===== BEHAVIOR =====
 :request-delay-ms  2000   ;; pause between page loads (be polite)
 :openai-model      "gpt-4o-mini"  ;; cost-effective; "gpt-4o" for higher quality
 :headless?         true   ;; false to watch the browser (debugging)
 :max-postings-per-site 50 ;; safety cap
 }
